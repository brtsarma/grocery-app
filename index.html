<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Grocery List</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
/* Fade + slide animation */
.fade-out { opacity:0; transform:translateX(-18px); transition:.35s; }

/* Swipe delete */
.swipe { transition:transform .28s; touch-action:pan-y; }
.swiped { transform:translateX(-90px); }

/* Dark mode */
.dark body { background:#0d0d0d; color:#f1f1f1; }
.dark .card { background:#1a1a1a!important; border-color:#333!important; }

/* Floating reset button */
#resetBtn {
 position:fixed; bottom:28px; right:28px; background:#2563eb;
 color:white; font-size:22px; padding:16px; border-radius:50%;
 box-shadow:0 4px 14px rgba(0,0,0,.3); z-index:999;
}
</style>
</head>

<body class="bg-gray-100 dark:bg-black">

<!-- Header -->
<header class="text-center py-5 text-2xl font-semibold bg-white dark:bg-neutral-900 shadow">
  My Grocery List
</header>

<!-- Tabs -->
<div class="overflow-x-auto whitespace-nowrap flex gap-3 px-4 py-3 bg-gray-50 dark:bg-neutral-800">
  <button class="px-4 py-2 rounded-full bg-white dark:bg-neutral-700 shadow text-sm" onclick="scrollToCard('Walmart')">üõí Walmart</button>
  <button class="px-4 py-2 rounded-full bg-white dark:bg-neutral-700 shadow text-sm" onclick="scrollToCard('Costco')">ü•• Costco</button>
  <button class="px-4 py-2 rounded-full bg-white dark:bg-neutral-700 shadow text-sm" onclick="scrollToCard('Sams')">üß∫ Sams</button>
  <button class="px-4 py-2 rounded-full bg-white dark:bg-neutral-700 shadow text-sm" onclick="scrollToCard('WinCo')">üåæ WinCo</button>
  <button class="px-4 py-2 rounded-full bg-white dark:bg-neutral-700 shadow text-sm" onclick="scrollToCard('IndiaBazar')">üçÖ India Bazar</button>
</div>

<!-- Store Container -->
<div id="storeContainer" class="p-4 flex flex-col gap-6"></div>

<!-- Reset Button -->
<button id="resetBtn" onclick="resetList()">‚ü≥</button>

<script>
/* ---------------------- DEFAULT DATA ---------------------- */
let masterData = {
  Walmart: ["Strawberry","Blueberry","Cilantro","Bell pepper","Cucumber","Organic spinach","Iceberg cabbage","Tomatoes","Avocadoes","Onion","Potatoes","Garlic","Cherry tomatoes","Banana","Chicken Breast","Organic mozzarella cheese sticks","Babybel","Tea milk","Probiotic yogurt","Taco Fire Sauce","Salad dressing"],
  Costco: ["Salmon","Fish","Aussie bites","Organic milk","Organic eggs"],
  Sams: ["Protein bar","Once upon a Farm pouch","Salmon","Wipes","Diaper","Cottage cheese","Lance peanut biscuit","Cauliflower","Mushroom","Capsicum","Asparagus","Iceberg cabbage","Tea milk","Organic milk","Organic egg"],
  WinCo: ["Nuts","Seeds"],
  IndiaBazar: ["Dhaniya","Thorai packet"]
};

let data = JSON.parse(localStorage.getItem("groceries")) || JSON.parse(JSON.stringify(masterData));

/* ---------------------- RENDER STORES ---------------------- */
function renderStores() {
  let html = "";
  Object.keys(data).forEach(store => {
    html += `
    <div id="${store}" class="card bg-white dark:bg-neutral-900 rounded-2xl shadow p-4 border">
      <h2 class="text-xl font-semibold mb-3">${store}</h2>
      <ul class="space-y-2">
        ${data[store].map(item => `
          <li class="flex items-center justify-between swipe bg-gray-50 dark:bg-neutral-800 px-3 py-2 rounded-lg" 
              ontouchstart="startSwipe(event,this)" ontouchmove="moveSwipe(event,this)" ontouchend="endSwipe(event,this,'${store}','${item}')">
            <div class="flex items-center gap-2">
              <input type="checkbox" onclick="checkItem('${item}')" />
              <span>${item}</span>
            </div>
            <button onclick="deleteItem('${item}')" class="text-red-600">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H3a1 1 0 000 2h14a1 1 0 100-2h-2V3a1 1 0 00-1-1H6zm2 5a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1zm4 0a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1z" clip-rule="evenodd"/>
              </svg>
            </button>
          </li>
        `).join("")}
      </ul>
    </div>`;
  });

  document.getElementById("storeContainer").innerHTML = html;
}
renderStores();

/* ---------------------- CHECK & REMOVE ---------------------- */
function checkItem(item) {
  let elements = [...document.querySelectorAll("li")].filter(li => li.innerText.includes(item));
  elements.forEach(el => el.classList.add("fade-out"));

  setTimeout(() => {
    Object.keys(data).forEach(store => {
      data[store] = data[store].filter(i => i !== item);
    });
    save();
    renderStores();
  }, 350);
}

/* ---------------------- DELETE ---------------------- */
function deleteItem(item) {
  Object.keys(data).forEach(store => {
    data[store] = data[store].filter(i => i !== item);
  });
  masterData[store] = masterData[store]?.filter(i => i !== item);
  save();
  renderStores();
}

/* ---------------------- RESET ---------------------- */
function resetList() {
  data = JSON.parse(JSON.stringify(masterData));
  save();
  renderStores();
}

/* ---------------------- SAVE ---------------------- */
function save() {
  localStorage.setItem("groceries", JSON.stringify(data));
}

/* ---------------------- SCROLL TO CARD ---------------------- */
function scrollToCard(id) {
  document.getElementById(id).scrollIntoView({ behavior: "smooth", block: "center" });
}

/* ---------------------- SWIPE DELETE ---------------------- */
let startX = 0;

function startSwipe(e, item) {
  startX = e.touches[0].clientX;
}

function moveSwipe(e, item) {
  let diff = e.touches[0].clientX - startX;
  if (diff < -40) item.classList.add("swiped");
}

function endSwipe(e, item, store, itemName) {
  if (item.classList.contains("swiped")) deleteItem(itemName);
  else item.classList.remove("swiped");
}
</script>

</body>
</html>
