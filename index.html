<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Grocery List</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
/* Checked item style */
.checked {
  text-decoration: line-through;
  opacity: 0.6;
  filter: blur(0.5px);
  transition: all 0.3s ease;
}

/* Swipe delete */
.swipe { transition:transform .28s; touch-action:pan-y; }
.swiped { transform:translateX(-90px); }

/* Floating reset button */
#resetBtn {
 position:fixed; bottom:28px; right:28px; background:#2563eb;
 color:white; font-size:22px; padding:16px; border-radius:50%;
 box-shadow:0 4px 14px rgba(0,0,0,.3); z-index:999;
}

/* Slider container */
#sliderContainer { overflow:hidden; width:100%; position:relative; }
#sliderTrack { display:flex; transition:transform 0.4s ease; width:100%; }
.storeCard { min-width:100vw; flex-shrink:0; padding:1rem; box-sizing:border-box; }
.arrowBtn { position:absolute; top:50%; transform:translateY(-50%); background:white; padding:0.5rem 0.75rem; border-radius:50%; box-shadow:0 2px 8px rgba(0,0,0,.2); font-size:24px; cursor:pointer; z-index:10; }
.arrowLeft { left:0.5rem; }
.arrowRight { right:0.5rem; }
</style>
</head>

<body class="bg-gray-100">

<header class="text-center py-5 text-2xl font-semibold bg-white shadow">My Grocery List</header>

<!-- Store Tabs -->
<div class="overflow-x-auto whitespace-nowrap flex gap-3 px-4 py-3 bg-gray-50">
  <button class="px-4 py-2 rounded-full bg-white shadow text-sm" onclick="goToStore(0)">üõí Walmart</button>
  <button class="px-4 py-2 rounded-full bg-white shadow text-sm" onclick="goToStore(1)">ü•• Costco</button>
  <button class="px-4 py-2 rounded-full bg-white shadow text-sm" onclick="goToStore(2)">üß∫ Sams</button>
  <button class="px-4 py-2 rounded-full bg-white shadow text-sm" onclick="goToStore(3)">üåæ WinCo</button>
  <button class="px-4 py-2 rounded-full bg-white shadow text-sm" onclick="goToStore(4)">üçÖ India Bazar</button>
</div>

<!-- Slider -->
<div id="sliderContainer">
  <div id="sliderTrack"></div>
  <div class="arrowBtn arrowLeft" onclick="prevStore()">‚Äπ</div>
  <div class="arrowBtn arrowRight" onclick="nextStore()">‚Ä∫</div>
</div>

<!-- Reset -->
<button id="resetBtn" onclick="resetList()">‚ü≥</button>

<script>
/* ------------------- DATA ------------------- */
let masterData = {
  Walmart:["Strawberry","Blueberry","Cilantro","Bell pepper","Cucumber","Organic spinach","Iceberg cabbage","Tomatoes","Avocadoes","Onion","Potatoes","Garlic","Cherry tomatoes","Banana","Chicken Breast","Organic mozzarella cheese sticks","Babybel","Tea milk","Probiotic yogurt","Taco Fire Sauce","Salad dressing"],
  Costco:["Salmon","Fish","Aussie bites","Organic milk","Organic eggs"],
  Sams:["Protein bar","Once upon a Farm pouch","Salmon","Wipes","Diaper","Cottage cheese","Lance peanut biscuit","Cauliflower","Mushroom","Capsicum","Asparagus","Iceberg cabbage","Tea milk","Organic milk","Organic egg"],
  WinCo:["Nuts","Seeds"],
  IndiaBazar:["Dhaniya","Thorai packet"]
};

let data = JSON.parse(localStorage.getItem("groceries")) || JSON.parse(JSON.stringify(masterData));
let storeNames = Object.keys(data);
let currentStoreIndex = 0;

/* ------------------- RENDER ------------------- */
function renderStores(){
  const track = document.getElementById("sliderTrack"); 
  track.innerHTML = "";
  storeNames.forEach(store=>{
    let html = `<div class="storeCard card bg-white rounded-2xl shadow border">
      <h2 class="text-xl font-semibold mb-3">${store}</h2>
      <ul class="space-y-2">
      ${data[store].map(item=>`<li class="flex items-center justify-between swipe bg-gray-50 px-3 py-2 rounded-lg" 
        ontouchstart="startSwipe(event,this)" ontouchmove="moveSwipe(event,this)" ontouchend="endSwipe(event,this,'${store}','${item}')">
        <div class="flex items-center gap-2">
          <input type="checkbox" onclick="checkItem('${item}')"/>
          <span>${item}</span>
        </div>
        <button onclick="deleteItem('${item}')" class="text-red-600">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H3a1 1 0 000 2h14a1 1 0 100-2h-2V3a1 1 0 00-1-1H6zm2 5a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1zm4 0a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1z" clip-rule="evenodd"/>
          </svg>
        </button></li>`).join("")}
      </ul>
    </div>`;
    track.innerHTML += html;
  });
  updateSlider();
}

/* ------------------- SLIDER ------------------- */
function updateSlider(){ document.getElementById("sliderTrack").style.transform = `translateX(-${currentStoreIndex*100}vw)`; }
function prevStore(){ if(currentStoreIndex>0) currentStoreIndex--; updateSlider(); }
function nextStore(){ if(currentStoreIndex<storeNames.length-1) currentStoreIndex++; updateSlider(); }
function goToStore(index){ currentStoreIndex=index; updateSlider(); }

/* ------------------- CHECK ------------------- */
function checkItem(item){
  const elements = [...document.querySelectorAll("li")].filter(li=>li.innerText.includes(item));
  elements.forEach(el=>{
    const span = el.querySelector("span");
    span.classList.toggle("checked");
  });
}

/* ------------------- DELETE & RESET ------------------- */
function deleteItem(item){ Object.keys(data).forEach(store=>data[store]=data[store].filter(i=>i!==item)); save(); renderStores(); }
function resetList(){ data=JSON.parse(JSON.stringify(masterData)); save(); renderStores(); }
function save(){ localStorage.setItem("groceries", JSON.stringify(data)); }

/* ------------------- SWIPE ------------------- */
let startX=0;
function startSwipe(e,item){startX=e.touches[0].clientX;}
function moveSwipe(e,item){let diff=e.touches[0].clientX-startX;if(diff<-40)item.classList.add("swiped");}
function endSwipe(e,item,store,itemName){if(item.classList.contains("swiped")) deleteItem(itemName); else item.classList.remove("swiped");}

renderStores();
</script>
</body>
</html>
